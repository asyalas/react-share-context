"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var _a,React=require("react"),React__default=_interopDefault(React),__assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},wrap=function(e){return e.children},checkNameSpace=function(e){if(!e)throw new Error("expect get the namespace ,but get "+typeof e)},checkIsExit=function(e,t){if(t[e])throw new Error("the Context has mounted")},checkIsNoExit=function(e,t){if(!t[e])throw new Error("the Context did not mounted")},create=function(e){void 0===e&&(e={});function o(e){var c=e.namespace,i=e.initialState;checkNameSpace(c),checkIsExit(c,l);var u=React.createContext({}),s=u.Provider;return function(e){var t=e.children,n=React.useState(i),a=n[0],r=n[1];u.getState=function(){return a};var o=React.createContext({dispatch:r,setState:function(t){return r(function(e){return __assign({},e,t)})}});return l[c]={stateContext:u,dispatchContext:o},React.createElement(s,{value:a},t)}}function n(e){checkNameSpace(e),checkIsNoExit(e,l);var t=l[e].stateContext,n=React.useContext(t);return __assign({},n,{getState:t.getState})}function a(e){checkNameSpace(e),checkIsNoExit(e,l);var t=l[e].dispatchContext;return React.useContext(t)}var l=e;return{useContext:n,useDispatchContext:a,useGlobalContext:function(){return Object.keys(l).reduce(function(e,t){return e[t]=__assign({},n(t),a(t)),e},{})},globalContext:l,deleteContext:function(e){checkNameSpace(e),l[e]=null},ContextProvider:function(e){var t=e.namespace,n=e.initialState,a=e.children,r=o({namespace:t,initialState:n});return React.createElement(r,{},a)},createContext:o}},DispatchProvider=function(e){var t=e.C,n=e.namespace,a=e.children,r=useDispatchContext(n);return React__default.createElement(t,__assign({},r),a)},StoreProvider=function(e){var o=e.reducers,c=e.namespace,t=e.children,n=Object.keys(o).reduce(function(t,e){var n=o[e],a=c+"."+e,r=createContext({namespace:a,initialState:{}});return function(e){return React__default.createElement(t,null,React__default.createElement(r,null,React__default.createElement(DispatchProvider,{C:n,namespace:a},e.children)))}},wrap);return React.createElement(n,{},t)},useContext=(_a=create()).useContext,useDispatchContext=_a.useDispatchContext,useGlobalContext=_a.useGlobalContext,globalContext=_a.globalContext,deleteContext=_a.deleteContext,ContextProvider=_a.ContextProvider,createContext=_a.createContext;exports.ContextProvider=ContextProvider,exports.StoreProvider=StoreProvider,exports.create=create,exports.createContext=createContext,exports.deleteContext=deleteContext,exports.globalContext=globalContext,exports.useContext=useContext,exports.useDispatchContext=useDispatchContext,exports.useGlobalContext=useGlobalContext;
